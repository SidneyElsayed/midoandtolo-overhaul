<section id="section-{{forloop.index}}">
  <div class="max-width mx-auto">
    {% if block.section-heading %}
      <div class="content-block">{{block.section-heading}}</div>
    {% endif %}

    {% for faq in block.faq-loop %}
    <div class="question-block faq-text-alignment border border-black {% if forloop.first %} {% else %} border-t-0 {% endif %} border-b-0">
      <div class="p-5">
        <h3 class="relative text-bold">
          {{faq.question}}
          <div class="absolute faq-icon w-3 h-4 top-0 right-0">
            <span class="block border-b-2 border-black w-3 leading-none"></span>
            <span class="block border-b-2 border-black relative top-[-1.4px] w-3 leading-none transition-all duration-1000 ease-out rotate-90"></span>
          </div>
        </h3>
      </div>
    </div>
    <div class="text-thin border border-black border-t-0  overflow-hidden transition-all duration-1000" style="max-height: 0px;">
      <div class="px-5 pb-5 answer-content">
        {{faq.answer-html}}
      </div>
    </div>
    {% endfor %}

  </div>
</section>

<!-- Mini Style Sheet -->
<style>
  #section-{{forloop.index}} .content-block {
    text-align: {{block.heading-text-alignment}};
  }

  #section-{{forloop.index}} .question-block {
    text-align: {{block.faq-text-alignment}};
  }

  #section-{{forloop.index}} .question-block.active .rotate-90 {
    transform: rotate(0deg);
    opacity: 0;
  }
  </style>

<script>

  const expandButtons = document.querySelectorAll(".question-block");
  
  function expand() {
    
    console.log(this.previousElementSibling)
    console.log(this.nextElementSibling)

    this.classList.toggle('active')

    let targetHeight = this.nextElementSibling.querySelector('.answer-content').clientHeight
  
  if (this.nextElementSibling.style.maxHeight == '0px'){

    this.nextElementSibling.style.maxHeight = `${targetHeight}px`

  } else {
    this.nextElementSibling.style.maxHeight = '0px'
  }
  
  }
  
  expandButtons.forEach(button => {
    button.addEventListener("click",expand);
  })
  
  </script>


{% comment %}

<!-- FRONT MATTER REFERENCE -->
- id: accordion
  section-heading: This is a heading
  heading-text-alignment: left
  faq-text-alignment: left
  faq-loop:
    - question: Lorem ipsum dolor sit amet consectetur adipisicing elit?
      answer-html: Harum tempora rerum debitis! Quo fugiat eius accusamus suscipit dignissimos aspernatur aliquid nisi repellat expedita veritatis saepe, delectus, dolorem consequatur autem fugit.
    - question: Lorem ipsum dolor sit amet consectetur adipisicing elit?
      answer-html: Harum tempora rerum debitis! Quo fugiat eius accusamus suscipit dignissimos aspernatur aliquid nisi repellat expedita veritatis saepe, delectus, dolorem consequatur autem fugit.
    - question: Lorem ipsum dolor sit amet consectetur adipisicing elit?
      answer-html: Harum tempora rerum debitis! Quo fugiat eius accusamus suscipit dignissimos aspernatur aliquid nisi repellat expedita veritatis saepe, delectus, dolorem consequatur autem fugit.

{% endcomment %}